<div>
  <div class="title" *ngIf="productData">
    <div class="title-name">
      {{ productData.display_name}}
    </div>
    <div class="title-icon">
      <a class="btn-icon">
        <i class="bi bi-x iconx"></i>
      </a>
    </div>
  </div>
  <div class="select"> 
    <div>
      <div class="custom-select" (click)="toggleSelect()">
        <div class="select-selected">
          {{ selectedOption ? 'Fulfillment facility: ' + selectedOption : 'Fulfillment facility: All' }}
          <i class="bi bi-chevron-down down"></i>
        </div>
        <div class="select-items" [ngClass]="{'select-hide': !isSelectOpen}">
          <div class="select-option" (click)="selectOption(null)">
            <img src="https://d1ud88wu9m1k4s.cloudfront.net/icons/ic_Tier_All_Location_24x24.svg" alt="All" class="select-option-image">
            Fulfillment facility: All
          </div>
          <div class="select-option" *ngFor="let sku of (productData?.base_sku ?? []) | uniqueLocation" (click)="selectOption(sku)"
           (change)="onCategoryChange()">
            <img [src]="sku.location_icon" alt="{{ sku.location_name }}" class="select-option-image">
            {{ sku.location_name }}
          </div>
        </div>
      </div>
    </div>
    <div>
      <select class="form-select" aria-label="Default select example" [(ngModel)]="selectedSize" (change)="onCategoryChange()" multiple>
        <option [value]="'ALL'" selected>Size: All</option>
        <ng-container *ngFor="let option of sizeOptions">
          <option *ngFor="let value of option.values" [value]="value.id">
            {{ value.name }}
          </option>
        </ng-container>
      </select>
    </div>
    <div>
      <select class="form-select" aria-label="Default select example" [(ngModel)]="selectedColor" (change)="onCategoryChange()" multiple>
        <option [value]="'ALL'" selected>Color: All</option>
        <ng-container *ngFor="let option of sizeOptions1">
          <option *ngFor="let value of option.values" [value]="value.id">
            {{ value.name }}
          </option>
        </ng-container>
      </select>
    </div>
    <div class="check">
      <label>
        <input type="checkbox" [(ngModel)]="showBaseCost"> Show Base Cost
      </label>
      <label>
        <input type="checkbox" [(ngModel)]="showSecondPrice"> Show 2nd Price
      </label>
      <!-- Add more checkboxes for other columns if needed -->
    </div>
  </div>
  <div class="table-full">
    <div class="card">
      <p-table [value]="filteredList" class="table">
          <ng-template pTemplate="header">
            <tr>
              <th rowspan="2" pSortableColumn="location_name" >Fulfillment facility
                <p-sortIcon field="location_name" />
              </th>
              <th rowspan="2" pSortableColumn="size_name" >Size
                <p-sortIcon field="size_name" />
              </th>
              <th rowspan="2" pSortableColumn="color_name" >Color
                <p-sortIcon field="color_name" />
              </th>
              <th rowspan="2" pSortableColumn="sku" >SKU
                <p-sortIcon field="sku" />
              </th>
              <th *ngIf="showBaseCost" rowspan="2" pSortableColumn="base_cost">Base cost
                <p-sortIcon field="base_cost"  />
              </th>
              <th *ngIf="showSecondPrice" rowspan="2" pSortableColumn="second_side_price" >2nd price
                <p-sortIcon field="second_side_price" />
              </th>
              <th class="center" colspan="4">Shipping fee </th>
            </tr>
            <tr>
              <td pSortableColumn="shipping_cost_us" >US
                <p-sortIcon field="shipping_cost_us" />
              </td>
              <td pSortableColumn="shipping_adding_us" >US addition
                <p-sortIcon field="shipping_adding_us" />
              </td>
              <td pSortableColumn="shipping_cost_ww" >WW
                <p-sortIcon field="shipping_cost_ww" />
              </td>
              <td pSortableColumn="shipping_adding_ww">WW addition
                <p-sortIcon field="shipping_adding_ww" />
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-sku>
              <tr>
                <td>
                  <img [src]="sku.location_icon">
                  <span>
                    {{ sku.location_name }}
                  </span>
                </td>
                <td>{{ sku.size_name }}</td>
                <td>{{ sku.color_name }}</td>
                <td>{{ sku.sku }}</td>
                <td *ngIf="showBaseCost">${{ sku.base_cost }}</td>
                <td *ngIf="showSecondPrice">${{ sku.second_side_price }}</td>
                <td>${{ sku.shipping_cost_us }}</td>
                <td>${{ sku.shipping_adding_us }}</td>
                <td>${{ sku.shipping_cost_ww }}</td>
                <td>${{ sku.shipping_adding_ww }}</td>
              </tr>
          </ng-template>
      </p-table>
  </div>
  </div>
</div>